# การทดลองที่ ๕ เรื่อง การเขียนโปรแกรมเชื่อมต่อไวไฟและเว็บเซอร์เวอร์

## วัตถุประสงค์
1. เพื่อศึกษาการเขียนโปรแกรมเชื่อมต่อไวไฟและเว็บเซอร์เวอร์

## อุปกรณ์ที่ใช้
1. ไมโครคอนโทรเลอร์
2. อุปกรณ์ USB to Serial
3. CPU
4. ตัวโปรแกรมเชื่อมต่อไวไฟและเว็บบราวเซอร์(05_Wifi-Web-Server)

## ศึกษาข้อมูลเบื้องต้น
1. 05 run wifi : https://youtu.be/VX-QNQcO-b4
2. src code ของโปรแกรมเชื่อมต่อไวไฟและเว็บบราวเซอร์(05_Wifi-Web-Server) : https://github.com/choompol-boonmee/lab63b/blob/master/examples/05_Wifi-Web-Server/src/main.cpp
## วิธีการทำการทดลอง
1. นำไมโครคอนโทรเลอร์ไปต่ออุปกรณ์ USB to Serial แล้วเปิด command prompt เพื่อเขียนโปรแกรมเข้าไปในไมโครคอนโทรเลอร์
![image](https://github.com/Nongpim/picture/blob/main/1%E0%B9%83%E0%B8%AB%E0%B8%A1%E0%B9%88.jpg) 
![image](https://github.com/Nongpim/picture/blob/main/2%E0%B9%83%E0%B8%AB%E0%B8%A1%E0%B9%88.jpg)
2. ดูตัวอย่างโปรแกรมที่จะเขียนในโฟลเดอร์ pattani
    * 2.1 พิมพ์คำสั่ง cd pattani เพื่อที่จะเข้าไปยังโฟลเดอร์
      * 2.1.1 ซึ่งในการทดลองนี้จะให้ใช้โปรแกรมตัวอย่างที่ 2 พิมพ์คำสั่ง cd 05_Wifi-Web-Server
      * 2.1.2 พิมพ์คำสั่ง vi src/main.cpp จะแสดงโค้ดของโปรแกรม เนื่องจากโปรแกรมนี้ต้องเชื่อมกับไวไฟ ดังนั้นต้องใส่ชื่อ wifi และ password ก่อน ซึ่งประกอบไปด้วย 2 ส่วน คือ 
         * 1. Setup เป็นการ connect กับไวไฟที่เราใส่ชื่อไว้ตอนแรก และ setup webserver โดยให้แสดงผลเป็น Hello cnt โดย cnt จะบวก 1 ขึ้นเรื่อยๆ
         * 2. Loop
        ![image](https://github.com/Nongpim/picture/blob/main/5.0%E0%B9%83%E0%B8%AB%E0%B8%A1%E0%B9%88.png)

3. อัปโหลดโปรแกรม 05_Wifi-Web-Server โดยพิมพ์คำสั่ง pio run -t upload
    * 3.1 ในขณะที่รันเพื่อให้ไมโครคอนโทรเลอร์รับโปรแกรมใหม่เข้าไป เราจะต้องกดปุ่มให้โหลด(ปุ่มสีดำ) แล้วกดปุ่มreset(ปุ่มสีแดง) เมื่อโปรแกรมโหลดเข้าไปในคอมพิวเตอร์ตัวจิ๋วนี้แล้ว
4. เมื่อโปรแกรมโหลดเสร็จแล้วจะขึ้นคำว่า SUCCESS ซึ่งต่อไปเราจะใช้คำสั่ง (pio device monitor) แล้วดูผลลัพธ์ที่แสดงผลใน monitor โดยจะขึ้น ip address

5. ให้ copy ip address ไปที่บราวเซอร์ในการทดสอบ

## การบันทึกผลการทดลอง
จากการทดลองนี้ จะเห็นได้ว่าเมื่อเราอัปโหลดโปรแกรมเชื่อมต่อไวไฟและเว็บบราวเซอร์(05_Wifi-Web-Server) เข้าไปในไมโครคอนโทรเลอร์ แล้วใช้คำสั่ง pio device monitor ผลลัพธ์จะแสดงผลในหน้าจอ โดยขึ้น ip address และเมื่อ copy ip address ไปที่บราวเซอร์ก็จะขึ้น Hello 1 โดย cnt ก็จะเปลี่ยนตัวแปรไปเรื่อยๆ

## อภิปรายผลการทดลอง
จากการทดลองนี้ เราจะสรุปได้ว่า เราจะสามารถให้ไมโครคอนโทรเลอร์เชื่อมต่อไวไฟและเว็บเซิร์ฟเวอร์สามารถทำงานได้เหมือนเว็บเซิร์ฟเวอร์ทั่วไป

## คำถามหลังการทดลอง
1. เราสามารถให้ไมโครคอนโทรเลอร์ทำงานเชื่อมต่อไวไฟได้เหมือนเว็บเซิร์ฟเวอร์ทั่วไปได้หรือไม่
* ตอบ ทำได้ ซึ่งเราสามารถดูได้จากการทดลองนี้
