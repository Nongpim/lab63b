# การทดลองที่ ๑ เรื่อง การเขียนโปรแกรมเพื่อรันบนไมโครคอนโทรเลอร์

## วัตถุประสงค์
1. เพื่อศึกษาวิธีการใช้ Platformio เบื้องต้น โดยเขียนโปรแกรมด้วย Frameworks ของ Arduino แล้วใช้คำสั่งอัดโปรแกรมเข้าไปในไมโครคอนโทรเลอร์

## อุปกรณ์ที่ใช้
1. ไมโครคอนโทรเลอร์
2. อุปกรณ์ USB to Serial

## ศึกษาข้อมูลเบื้องต้น
เพื่อให้ทำแลปนีได้ต้องรู้อะไรบ้าง
1.ไมโครคอนโทรเลอร์ที่ใช้คือ ไมโครคอนโทรเลอร์ชื่อ ESP01
2.เขียนโปรแกรมในไมโครคอนโทรเลอร์โดยเอาไมโครคอนโทรเลอร์ไปต่ออุปกรณ์ USB to Serial
3.หลังจากนั้นไปดูตัวอย่างโปรแกรมที่โฟลเดอร์ pattani (cd pattani)(เมื่อเปิดได้จะเห็นมีโปรแกรมตัวอย่าง 9 โปรแกรม) ซึ่งในการทดลองนี้จะให้ใช้โปรแกรมตัวอย่างที่1(cd 01_Serial-Monitor)
4.(vi src/main.cpp)เพื่อดูโค้ดในโปรแกรม โดยโปรแกรมนี้เขียนขึ้นมาเพื่อทดสอบ เขียนด้วยภาษาCหรือC+ ซึ่งในโปรแกรมนี้จะแบ่งเป็น2ส่วน 1.Setup จะรันครั้งเดียว โดยจะSetup Serial ที่ความเร็ว115200 2.Loop จะรันหลายครั้งตลอดไป ซึ่งจะเพิ่มตัวแปรcount(cnt)เพิ่มขึ้นเรื่อยๆ โดยที่ให้แสดงผลตัวแปรcountออกมา โดยหน่วงเวลา1วินาทีหรือ1000ms
5.ในแต่ละโปรแกรม เมื่อใช้platformio จะมีconfigulation file ที่ชื่อว่า platformio.ini (vi platformio.ini) configulation file นี้ จะบอกว่า เป็นplatformหรือผลิตภัณฑ์ของบริษัทใด บอกboardชื่ออะไร บอกวิธีการเขียนโปรแกรมแบบไหน บอกportที่ใช้ติดต่อว่าเป็นportอะไร(ถ้าเป็นwindowจะบอกCOM3/4)
6.อัปโหลดโปรแกรม 01_Serial-Monitorโดย(pio run -t upload) ในขณะที่รันเพื่อให้ไมโครคอนโทรเรอร์รับโปรแกรมใหม่เข้าไป เราจะต้องกดปุ่มให้โหลด(ปุ่มสีดำ)แล้วกดปุ่มreset(ปุ่มสีแดง) เมื่อโปรแกรมโหลดเข้าไปในคอมพิวเตอร์ตัวจิ๋วนี้แล้ว เมื่อโปรแกรมโหลดเสร็จแล้วจะขึ้นคำว่า success
7.โหลดเสร็จเราจะใช้คำสั่ง (pio device monitor) แล้วดูผลลัพธ์ที่แสดงผลในmonitor จะเห็นได้ว่า ตัวแปรcountที่เริ่มตั้งแต่ 0 ถูกingremrnt 123เรื่อยไปและจะแสดงผลทุกๆ1วินาที
8.ต่อไปเราจะลองกดปุ่มreset(ปุ่มสีแดง) เพื่อให้มันreset ไมโครคอนโทรเลอร์ตัวนี้ มันจะresetแล้วเริ่มนับ1ใหม่

## วิธีการทำการทดลอง
1. นำไมโครคอนโทรเลอร์ไปต่ออุปกรณ์ USB to Serial เพื่อเขียนโปรแกรมเข้าไปในไมโครคอนโทรเลอร์
2. ดูตัวอย่างโปรแกรมที่จะเขียนในโฟลเดอร์ pattani (cd pattani)(เมื่อเปิดได้ จะเห็นมีโปรแกรมตัวอย่าง 9 โปรแกรม) ซึ่งในการทดลองนี้จะให้ใช้โปรแกรมตัวอย่างที่1(cd 01_Serial-Monitor)
3. อัปโหลดโปรแกรม 01_Serial-Monitorโดย(pio run -t upload) ในขณะที่รันเพื่อให้ไมโครคอนโทรเลอร์รับโปรแกรมใหม่เข้าไป เราจะต้องกดปุ่มให้โหลด(ปุ่มสีดำ)แล้วกดปุ่มreset(ปุ่มสีแดง) เมื่อโปรแกรมโหลดเข้าไปในคอมพิวเตอร์ตัวจิ๋วนี้แล้ว 
4. เมื่อโปรแกรมโหลดเสร็จแล้วจะขึ้นคำว่า SUCCESS ซึ่งต่อไปเราจะใช้คำสั่ง (pio device monitor) แล้วดูผลลัพธ์ที่แสดงผลใน monitor
(พร้อมภาพประกอบ)
## การบันทึกผลการทดลอง
ผลลัพธ์จะแสดงผลในหน้าจอ monitor ซึ่งจะเห็นได้ว่า ตัวแปร count ที่เริ่มตั้งแต่ 0 จะถูก ingrement 1,2,3,... เรื่อยไปและจะแสดงผลทุกๆ 1 วินาที ซึ่งเมื่อเราลองกดปุ่ม reset(ปุ่มสีแดง) ไมโครคอนโทรเลอร์จะ reset ตัวเองแล้วเริ่มนับ 1 ใหม่
(พร้อมตัวอย่าง)
## อภิปรายผลการทดลอง
คิดวิเคราะห์การทดลองนี้นำไปประยุกต์ทำอะไรได้บ้าง
(พร้อมตัวอย่าง)
## คำถามหลังการทดลอง
ตั้งคำถามจากการทดลอง
(พร้อมตัวอย่างคำตอบ)
